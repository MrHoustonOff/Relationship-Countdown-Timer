<template x-if="form && form.arrival_day"> <div class="settings-module">
        <h2 x-text="$store.app.lang['settings_section_calendar'] || 'ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ'"></h2>
        <p class="form-description module-description" x-html="$store.app.lang['settings_desc_section_calendar'] || 'ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ Ð²Ð¸Ð´ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ...'"></p>

        <h3 class="sub-header" x-text="$store.app.lang['settings_calendar_subtitle_general'] || 'ÐžÐ±Ñ‰Ð¸Ðµ'"></h3>

        <div class="setting-row">
            <div class="input-group">
                 <label for="setting-calendar-save-zoom"></label>
                 <div class="form-group-checkbox checkbox-label-first">
                     <input type="checkbox" id="setting-calendar-save-zoom"
                            x-model="form.calendar_save_zoom"
                            @input="AudioManager.playRandom('PlusButtons', true)">
                     <label for="setting-calendar-save-zoom" x-text="$store.app.lang['settings_calendar_save_zoom_label'] || 'Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÑ‚ÑŒ Ð—ÑƒÐ¼'"></label>
                 </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('calendar_save_zoom'); AudioManager.playRandom('DeleteButtons', true); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_calendar_save_zoom_desc'] || 'Ð—Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÑ‚ Ð¼Ð°ÑÑˆÑ‚Ð°Ð± ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ...'"></p>
        </div>

        <h3 class="sub-header" x-text="$store.app.lang['settings_calendar_subtitle_sticker'] || 'Ð¡Ñ‚Ð¸ÐºÐµÑ€Ñ‹ Ð”Ð½ÐµÐ¹ (X)'"></h3>

        <div class="setting-row">
            <div class="input-group">
                <label for="setting-sticker-emoji" x-text="$store.app.lang['settings_sticker_emoji_label'] || 'Ð¡Ð¸Ð¼Ð²Ð¾Ð»'"></label>
                <input type="text" id="setting-sticker-emoji"
                       x-model="form.sticker_emoji"
                       @input="AudioManager.playRandom('PlusButtons', true)">
                       maxlength="2"> </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('sticker_emoji'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_sticker_emoji_desc'] || 'Ð¡Ð¸Ð¼Ð²Ð¾Ð» Ð¸Ð»Ð¸ Emoji (Ð½Ð°Ð¿Ñ€., X, â¤ï¸)'"></p>
        </div>

        <div class="setting-row">
            <div class="input-group">
                <label for="setting-sticker-color" x-text="$store.app.lang['settings_sticker_color_label'] || 'Ð¦Ð²ÐµÑ‚ Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ð°'"></label>
                <div class="color-input-container">
                    <input type="color" id="setting-sticker-color"
                           x-model="form.sticker_color">
                    <span x-text="form.sticker_color"></span> </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('sticker_color'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_sticker_color_desc'] || 'Ð¦Ð²ÐµÑ‚ Ð´Ð»Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ð²Ñ‹ÑˆÐµ.'"></p>
        </div>

        <div class="setting-row">
            <div class="input-group">
                <label for="setting-sticker-scale" x-text="$store.app.lang['settings_sticker_scale_label'] || 'ÐœÐ°ÑÑˆÑ‚Ð°Ð± Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ð°'"></label>
                <input type="number" id="setting-sticker-scale"
                       x-model.number="form.sticker_scale"
                       @input="AudioManager.playRandom('PlusButtons', true)"
                       step="0.1" min="0.1" max="10">
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('sticker_scale'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_sticker_scale_desc'] || 'ÐœÐ½Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð° (Ð½Ð°Ð¿Ñ€., 1.0, 1.5)'"></p>
        </div>

        <div class="setting-row">
            <div class="input-group">
                <label for="setting-sticker-rotation" x-text="$store.app.lang['settings_sticker_rotation_label'] || 'ÐœÐ°ÐºÑ. Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ ÐŸÐ¾Ð²Ð¾Ñ€Ð¾Ñ‚'"></label>
                <input type="number" id="setting-sticker-rotation"
                       x-model.number="form.sticker_random_rotation_max"
                       @input="AudioManager.playRandom('PlusButtons', true)"
                       step="1" min="0" max="180">
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('sticker_random_rotation_max'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_sticker_rotation_desc'] || 'Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ ÑƒÐ³Ð¾Ð» Ð² Ð³Ñ€Ð°Ð´ÑƒÑÐ°Ñ… (Â±15Â°)'"></p>
        </div>

        <div class="setting-row">
            <div class="input-group">
                <label for="setting-calendar-marked-bg" x-text="$store.app.lang['settings_calendar_marked_bg_label'] || 'Ð¦Ð²ÐµÑ‚ Ð¤Ð¾Ð½Ð° ÐžÑ‚Ð¼ÐµÑ‚ÐºÐ¸'"></label>
                <div class="color-input-container">
                    <input type="color" id="setting-calendar-marked-bg"
                           x-model="form.calendar_marked_day_color">
                    <span x-text="form.calendar_marked_day_color"></span>
                </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('calendar_marked_day_color'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_calendar_marked_bg_desc'] || 'Ð¤Ð¾Ð½ ÑÑ‡ÐµÐ¹ÐºÐ¸ Ð¿Ñ€Ð¸ ÐºÐ»Ð¸ÐºÐµ.'"></p>
        </div>

        <div class="setting-row">
            <div class="input-group">
                <label x-text="$store.app.lang['settings_preview_label'] || 'ÐŸÑ€ÐµÐ²ÑŒÑŽ'"></label>
                <div class="preview-container">
                    <div class="day-cell preview-cell">
                        <span class="day-number">1</span>
                        <div class="sticker"
                             x-text="form.sticker_emoji"
                             :style="{
                                 color: form.sticker_color,
                                 transform: `rotate(-${form.sticker_random_rotation_max || 0}deg) scale(${form.sticker_scale || 1})`
                             }">
                        </div>
                    </div>
                    <div class="day-cell preview-cell"
                         :style="{ backgroundColor: form.calendar_marked_day_color }">
                        <span class="day-number">2</span>
                        <div class="sticker"
                             x-text="form.sticker_emoji"
                             :style="{
                                 color: form.sticker_color,
                                 transform: `scale(${form.sticker_scale || 1})`
                             }">
                        </div>
                    </div>
                    <div class="day-cell preview-cell">
                        <span class="day-number">3</span>
                        <div class="sticker"
                             x-text="form.sticker_emoji"
                             :style="{
                                 color: form.sticker_color,
                                 transform: `rotate(${form.sticker_random_rotation_max || 0}deg) scale(${form.sticker_scale || 1})`
                             }">
                        </div>
                    </div>
                </div>
            </div>
            <div class="reset-button-placeholder"></div>
            <p class="form-description" x-html="$store.app.lang['settings_preview_sticker_desc'] || 'ÐšÐ°Ðº Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÑ‚ÑŒ Ð¾Ñ‚Ð¼ÐµÑ‚ÐºÐ°.'"></p>
        </div>

        <h3 class="sub-header" x-text="$store.app.lang['settings_desc_calendar_subtitle_arrival'] || 'Ð”ÐµÐ½ÑŒ ÐŸÑ€Ð¸ÐµÐ·Ð´Ð°'"></h3>

        <div class="setting-row">
            <div class="input-group">
                 <label for="setting-arrival-use-bg"></label>
                 <div class="form-group-checkbox checkbox-label-first">
                     <input type="checkbox" id="setting-arrival-use-bg"
                            x-model="form.arrival_day.use_bg"
                            @input="AudioManager.playRandom('PlusButtons', true)">
                     <label for="setting-arrival-use-bg" x-text="$store.app.lang['settings_arrival_use_bg_label'] || 'Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¤Ð¾Ð½'"></label>
                 </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('arrival_day.use_bg'); AudioManager.playRandom('DeleteButtons', true); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
        </div>

        <div class="setting-row" :class="{ 'setting-disabled': !form.arrival_day.use_bg }">
            <div class="input-group">
                <label for="setting-arrival-bg-color" x-text="$store.app.lang['settings_arrival_bg_color_label'] || 'Ð¦Ð²ÐµÑ‚ Ð¤Ð¾Ð½Ð°'"></label>
                <div class="color-input-container">
                    <input type="color" id="setting-arrival-bg-color"
                           x-model="form.arrival_day.bg_color"
                           :disabled="!form.arrival_day.use_bg">
                    <span x-text="form.arrival_day.bg_color"></span>
                </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('arrival_day.bg_color')"
                        :disabled="!form.arrival_day.use_bg; AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_arrival_bg_color_desc'] || 'ÐžÑÐ¾Ð±Ñ‹Ð¹ Ñ„Ð¾Ð½ Ð´Ð»Ñ Ð´Ð½Ñ Ð¿Ñ€Ð¸ÐµÐ·Ð´Ð°.'"></p>
        </div>

        <div class="setting-row">
            <div class="input-group">
                 <label for="setting-arrival-use-sticker"></label>
                 <div class="form-group-checkbox checkbox-label-first">
                     <input type="checkbox" id="setting-arrival-use-sticker"
                            x-model="form.arrival_day.use_sticker"
                            @input="AudioManager.playRandom('PlusButtons', true)">
                     <label for="setting-arrival-use-sticker" x-text="$store.app.lang['settings_arrival_use_sticker_label'] || 'Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¡Ñ‚Ð¸ÐºÐµÑ€'"></label>
                 </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('arrival_day.use_sticker'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
        </div>

        <div class="setting-row" :class="{ 'setting-disabled': !form.arrival_day.use_sticker }">
            <div class="input-group">
                <label for="setting-arrival-emoji" x-text="$store.app.lang['settings_arrival_emoji_label'] || 'Ð¡Ð¸Ð¼Ð²Ð¾Ð»'"></label>
                <input type="text" id="setting-arrival-emoji"
                       x-model="form.arrival_day.sticker_emoji"
                       @input="AudioManager.playRandom('PlusButtons', true)"
                       :disabled="!form.arrival_day.use_sticker"
                       maxlength="2">
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('arrival_day.sticker_emoji')"
                        :disabled="!form.arrival_day.use_sticker; AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
        </div>

        <div class="setting-row" :class="{ 'setting-disabled': !form.arrival_day.use_sticker }">
            <div class="input-group">
                <label for="setting-arrival-scale" x-text="$store.app.lang['settings_arrival_scale_label'] || 'ÐœÐ°ÑÑˆÑ‚Ð°Ð±'"></label>
                <input type="number" id="setting-arrival-scale"
                       x-model.number="form.arrival_day.sticker_scale"
                       @input="AudioManager.playRandom('PlusButtons', true)"
                       :disabled="!form.arrival_day.use_sticker"
                       step="0.1" min="0.1" max="10">
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('arrival_day.sticker_scale')"
                        :disabled="!form.arrival_day.use_sticker; AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
        </div>

        <div class="setting-row">
            <div class="input-group">
                <label x-text="$store.app.lang['settings_preview_label'] || 'ÐŸÑ€ÐµÐ²ÑŒÑŽ'"></label>
                <div class="preview-container">
                    <div class="day-cell preview-cell"
                         :style="{
                             backgroundColor: form.arrival_day.use_bg ? form.arrival_day.bg_color : 'var(--color-calendar-day-bg)'
                         }">
                        <span class="day-number">ðŸ’–</span>
                        <template x-if="form.arrival_day.use_sticker">
                             <div class="sticker arrival-sticker"
                                 x-text="form.arrival_day.sticker_emoji"
                                 :style="{
                                     color: 'var(--color-arrival-highlight-sticker)',
                                     transform: `scale(${form.arrival_day.sticker_scale || 1})`
                                 }">
                            </div>
                        </template>
                    </div>
                </div>
            </div>
            <div class="reset-button-placeholder"></div>
            <p class="form-description" x-html="$store.app.lang['settings_preview_arrival_desc'] || 'ÐšÐ°Ðº Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÑ‚ÑŒ Ð´ÐµÐ½ÑŒ Ð¿Ñ€Ð¸ÐµÐ·Ð´Ð°.'"></p>
        </div>

        <h3 class="sub-header" x-text="$store.app.lang['settings_calendar_subtitle_appearance'] || 'Ð’Ð½ÐµÑˆÐ½Ð¸Ð¹ Ð’Ð¸Ð´'"></h3>

        <div class="setting-row">
            <div class="input-group">
                <label for="setting-calendar-empty-bg" x-text="$store.app.lang['settings_calendar_empty_bg_label'] || 'Ð¦Ð²ÐµÑ‚ ÐŸÑƒÑÑ‚Ð¾Ð¹ Ð¯Ñ‡ÐµÐ¹ÐºÐ¸'"></label>
                <div class="color-input-container">
                    <input type="color" id="setting-calendar-empty-bg"
                           x-model="form.calendar_empty_cell_color">
                    <span x-text="form.calendar_empty_cell_color"></span>
                </div>
            </div>
            <div class="reset-button-placeholder">
                <button type="button" class="reset-default-btn" title="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"
                        @click="resetField('calendar_empty_cell_color'); AudioManager.playRandom('DeleteButtons', true)">â†º</button>
            </div>
            <p class="form-description" x-html="$store.app.lang['settings_calendar_empty_bg_desc'] || 'Ð¤Ð¾Ð½ Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð´Ð½ÐµÐ¹ (Ð²Ð½Ðµ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð°).'"></p>
        </div>

    </div>
</template>