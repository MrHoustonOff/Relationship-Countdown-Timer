<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Relationship Countdown Timer</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js"></script>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>

    <script src="{{ url_for('static', filename='js/effects.js') }}"></script>
    </head>

<body x-data @alpine:initialized="$store.app.init()" x-show="$store.app.ui.isLoaded" style="display: none;">

    <template x-if="$store.app.config">
        <div> <header class="app-header">
                <nav>
                    <button
                        @click="$store.app.navigateTo('page-main')"
                        :class="{ 'active': $store.app.ui.currentPage === 'page-main' }"
                        x-text="$store.app.lang['header_main'] || '...'">
                    </button>
                    <button
                        @click="$store.app.navigateTo('page-calendar')"
                        :class="{ 'active': $store.app.ui.currentPage === 'page-calendar' }"
                        x-text="$store.app.lang['header_calendar'] || '...'">
                    </button>
                    <button
                        @click="$store.app.navigateTo('page-settings')"
                        :class="{ 'active': $store.app.ui.currentPage === 'page-settings' }"
                        x-text="$store.app.lang['header_settings'] || '...'">
                    </button>
                </nav>
            </header>

            <main class="app-main">

                {% include '_page_main.html' %}

                <section
                    id="page-calendar"
                    class="page-content"
                    :class="{ 'active': $store.app.ui.currentPage === 'page-calendar' }">

                    <h1>[ЗАГЛУШКА] Страница Календаря</h1>
                </section>

                <section
                    id="page-settings"
                    class="page-content"
                    :class="{ 'active': $store.app.ui.currentPage === 'page-settings' }">

                    <h1>[ЗАГЛУШКА] Страница Настроек</h1>
                </section>

            </main>

        </div>
    </template>

    <template x-if="$store.app.ui.error">
         <div class="critical-error-fallback">
            <h2>Критическая ошибка (v2.3)</h2>
            <pre x-text="$store.app.ui.error"></pre>
        </div>
    </template>

</body>
</html>